<!DOCTYPE html>
<html lang="pt" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>How to set up a simple Wireguard VPN | .blog</title>
<meta name="keywords" content="arch, debian, howto, tips, vpn, wireguard" />
<meta name="description" content="Install Wireguard I&rsquo;m using a Debian virtual machine for the server. In Debian 10, you&rsquo;ll need to install the following two packages:
apt install wireguard-dkms wireguard-tools
Set up keys First, navigate to /etc/wireguard (If not created, run mkdir /etc/wireguard as root) and then run the following commands as root:
wg genkey | tee laptop-private.key | wg pubkey &gt; laptop-public.key wg genkey | tee server-private.key | wg pubkey &gt; server-public.key
The first line is for the public and private keys of the client, named laptop because, well, it&rsquo;ll be used on a laptop.">
<meta name="author" content="Bruno Miguel">
<link rel="canonical"
    href="/post/how-to-set-up-a-simple-wireguard-vpn/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.97393d543273cd7c2f7aefc568b172754502c536050d860c3ce214dd6ed6e2f6.css" integrity="sha256-lzk9VDJzzXwveu/FaLFydUUCxTYFDYYMPOIU3W7W4vY="
    rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js" integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16"
    href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32"
    href="/favicon-32x32.png">
<link rel="apple-touch-icon"
    href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }
    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }
    </style>
</noscript><link rel="preload" href="/fonts/rubik-v14-latin-300.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/rubik-v14-latin-300.woff" as="font" type="font/woff" crossorigin>

<link rel="preload" href="/fonts/rubik-v14-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/rubik-v14-latin-regular.woff" as="font" type="font/woff" crossorigin>

<link rel="preload" href="/fonts/rubik-v14-latin-700.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/rubik-v14-latin-700.woff" as="font" type="font/woff" crossorigin>

<link rel="preload" href="/fonts/rubik-v14-latin-300italic.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/rubik-v14-latin-300italic.woff" as="font" type="font/woff" crossorigin>

<link rel="preload" href="/fonts/rubik-v14-latin-italic.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/rubik-v14-latin-italic.woff" as="font" type="font/woff" crossorigin>

<link rel="preload" href="/fonts/rubik-v14-latin-700italic.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/rubik-v14-latin-700italic.woff" as="font" type="font/woff" crossorigin>


<script data-goatcounter="https://blog-brunomiguel.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>


<script defer data-domain="blog.brunomiguel.net" src="https://plausible.matterho.st/js/plausible.js"></script><div id="cookie-notice">
    <span>Este site usa cookies do GoatCounter e do Plausible, dois softwares de código aberto, para estatísticas.</span>
    <a id="cookie-notice-close" class="btn btn-primary btn-sm">Fechar</a>
    <a href="/privacidade" class="btn btn-primary btn-sm">Mais info</a></div>
    <script>
        function createCookie(name,value,days) {
            var expires = "";
            if (days) {
                var date = new Date();
                date.setTime(date.getTime() + (days*24*60*60*1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + value + expires + "; path=/";
        }
        function readCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for(var i=0;i < ca.length;i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1,c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
            }
            return null;
        }
        function eraseCookie(name) {
            createCookie(name,"",-1);
        }
    
        if(readCookie('cookie-notice-option')=='true') {
            
    
            
        } else if (readCookie('cookie-notice-option')!='false'){
            document.getElementById('cookie-notice').style.display = 'block';
        }
    
        document.getElementById('cookie-notice-close').addEventListener("click",function() {
            createCookie('cookie-notice-option','true',31);
            document.getElementById('cookie-notice').style.display = 'none';
            location.reload();
        });
    
    </script><meta property="og:title" content="How to set up a simple Wireguard VPN" />
<meta property="og:description" content="Install Wireguard I&rsquo;m using a Debian virtual machine for the server. In Debian 10, you&rsquo;ll need to install the following two packages:
apt install wireguard-dkms wireguard-tools
Set up keys First, navigate to /etc/wireguard (If not created, run mkdir /etc/wireguard as root) and then run the following commands as root:
wg genkey | tee laptop-private.key | wg pubkey &gt; laptop-public.key wg genkey | tee server-private.key | wg pubkey &gt; server-public.key
The first line is for the public and private keys of the client, named laptop because, well, it&rsquo;ll be used on a laptop." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/how-to-set-up-a-simple-wireguard-vpn/" /><meta property="og:image" content="/papermod-cover.png"/><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-02-15T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-02-15T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/papermod-cover.png"/>

<meta name="twitter:title" content="How to set up a simple Wireguard VPN"/>
<meta name="twitter:description" content="Install Wireguard I&rsquo;m using a Debian virtual machine for the server. In Debian 10, you&rsquo;ll need to install the following two packages:
apt install wireguard-dkms wireguard-tools
Set up keys First, navigate to /etc/wireguard (If not created, run mkdir /etc/wireguard as root) and then run the following commands as root:
wg genkey | tee laptop-private.key | wg pubkey &gt; laptop-public.key wg genkey | tee server-private.key | wg pubkey &gt; server-public.key
The first line is for the public and private keys of the client, named laptop because, well, it&rsquo;ll be used on a laptop."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "How to set up a simple Wireguard VPN",
      "item": "/post/how-to-set-up-a-simple-wireguard-vpn/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "How to set up a simple Wireguard VPN",
  "name": "How to set up a simple Wireguard VPN",
  "description": "Install Wireguard I\u0026rsquo;m using a Debian virtual machine for the server. In Debian 10, you\u0026rsquo;ll need to install the following two packages:\napt install wireguard-dkms wireguard-tools\nSet up keys First, navigate to /etc/wireguard (If not created, run mkdir /etc/wireguard as root) and then run the following commands as root:\nwg genkey | tee laptop-private.key | wg pubkey \u0026gt; laptop-public.key wg genkey | tee server-private.key | wg pubkey \u0026gt; server-public.key\nThe first line is for the public and private keys of the client, named laptop because, well, it\u0026rsquo;ll be used on a laptop.",
  "keywords": [
    "arch", "debian", "howto", "tips", "vpn", "wireguard"
  ],
  "articleBody": "Install Wireguard I’m using a Debian virtual machine for the server. In Debian 10, you’ll need to install the following two packages:\napt install wireguard-dkms wireguard-tools\nSet up keys First, navigate to /etc/wireguard (If not created, run mkdir /etc/wireguard as root) and then run the following commands as root:\nwg genkey | tee laptop-private.key | wg pubkey  laptop-public.key wg genkey | tee server-private.key | wg pubkey  server-public.key\nThe first line is for the public and private keys of the client, named laptop because, well, it’ll be used on a laptop. But you can choose any other name.\nConfigure the Wireguard server First, enable IP forwarding. Since we’re only using IPv4, edit the /etc/sysctl.conf file as root, locate the net.ipv4.ip_forward line, uncomment it and change the value to 1.\nNow, you need to create the /etc/wireguard/wg0.conf. This will be both the name of the connection interface and the configuration file for that interface. I’m using just one for a simple setup.\n[Interface] Address = 10.200.200.1/24 ListenPort = 51820 PrivateKey = PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n[Peer]\nlaptop PublicKey = AllowedIPs = 10.200.200.2/32\nNow you are ready to start the Wireguard daemon, so it can accept connections. Just run:\nwg-quick up wg0\nSome things to know [Interface] Address: the private IPv4 addresses (you can also use IPv6 addresses) for the Wireguard server subnet. In this example, clients connection to the server will be assigned IPs ranging from 10.200.200.1 to 10.200.200.254.\nListenPort: the port where Wireguard will listen. Don’t forget to open it in your firewall.\nPrivateKey: the content from server-private.key.\nPostUp and PostDown: defines steps to be run after the interface is turned on or off, respectively. In this case, iptables is used to set IP masquerade rules to allow all the clients to share the server’s IPv4 address. The rules will then be cleared once the tunnel is down. Don’t forget to change eth0 to your server’s network device.\n[Peer] PublicKey: the content from laptop-public.key.\nAllowedIPs: the subnet IP assigned to that client when it connects to the server\nSet up the client On the client side, you’ll also have to install Wireguard. If you’re using Debian, Ubuntu or any distribution based on the previous two, the command will be the same (I’m assuming Ubuntu uses the same package names. If not, change it to your needs). In Arch, the distribution I’m currently using, you can install packages with:\npacman -Syuv wireguard-dkms wireguard-tools\nConfigure the Wireguard client Create the /etc/wireguard/wg0.conf file and populate it with the following content:\n[Interface] Address = 10.200.200.2/24 PrivateKey = [Peer] PublicKey = AllowedIPs = 0.0.0.0/0 Endpoint = xxx.xxx.xxx.xxx:51820 PersistentKeepalive = 25\nSome things to know [Interface] Addresss: the client’s IP address in Wiregard’s subnet.\nPrivateKey: the content from laptop-private.key.\n[Peer] PublicKey: the content from server-public.key.\nAllowedIPs: set it to 0.0.0.0/0 to forward all IPv4 traffic through Wireguard.\nEndpoint: the server IP address, followed by the port to connect to.\nPersistentKeepalive: the number of seconds you wish the client sends a keepalive packet to the server. This is useful if the client is behind NAT or a firewall\nTest the connection On the client side, run wg-quick up wg0. You should now have a working Wireguard connection just like any VPN.\nIf you found a typo or an error, please use the comment box to report it. Also, if you found the post useful, please share it on social media, so it can reach a larger audience.\n",
  "wordCount" : "603",
  "inLanguage": "pt",
  "datePublished": "2020-02-15T00:00:00Z",
  "dateModified": "2020-02-15T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Bruno Miguel"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/how-to-set-up-a-simple-wireguard-vpn/"
  },
  "publisher": {
    "@type": "Organization",
    "name": ".blog",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title=".blog (Alt + H)">.blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/search/" title="Pesquisa">
                    <span>Pesquisa</span>
                </a>
            </li>
            <li>
                <a href="/arquivo" title="Arquivo">
                    <span>Arquivo</span>
                </a>
            </li>
            <li>
                <a href="/categories/" title="Categorias">
                    <span>Categorias</span>
                </a>
            </li>
            <li>
                <a href="/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="/privacidade/" title="Privacidade">
                    <span>Privacidade</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/post/">Posts</a></div>
    <h1 class="post-title">
      How to set up a simple Wireguard VPN
    </h1>
    
    <div class="post-meta"><span title='2020-02-15 00:00:00 +0000 UTC'>fevereiro 15, 2020</span>&nbsp;·&nbsp;3 minutos&nbsp;·&nbsp;Bruno Miguel

</div>
  </header> 



  <div class="post-content"><p><img loading="lazy" src="images/network-1572617_1920.jpg" alt=""  />
</p>
<h2 id="install-wireguardhttpswwwwireguardcomquickstart">Install <a href="https://www.wireguard.com/quickstart/">Wireguard</a><a hidden class="anchor" aria-hidden="true" href="#install-wireguardhttpswwwwireguardcomquickstart">#</a></h2>
<p>I&rsquo;m using a Debian virtual machine for the server. In Debian 10, you&rsquo;ll need to install the following two packages:</p>
<p>apt install wireguard-dkms wireguard-tools</p>
<h2 id="set-up-keys">Set up keys<a hidden class="anchor" aria-hidden="true" href="#set-up-keys">#</a></h2>
<p>First, navigate to <code>/etc/wireguard</code> (If not created, run <code>mkdir /etc/wireguard</code> as root) and then run the following commands as root:</p>
<p>wg genkey | tee laptop-private.key |  wg pubkey &gt; laptop-public.key
wg genkey | tee server-private.key |  wg pubkey &gt; server-public.key</p>
<p>The first line is for the public and private keys of the client, named laptop because, well, it&rsquo;ll be used on a laptop. But you can choose any other name.</p>
<h2 id="configure-the-wireguard-server">Configure the Wireguard server<a hidden class="anchor" aria-hidden="true" href="#configure-the-wireguard-server">#</a></h2>
<p>First, enable IP forwarding. Since we&rsquo;re only using IPv4, edit the <code>/etc/sysctl.conf</code> file as root, locate the <code>net.ipv4.ip_forward</code> line, uncomment it and change the value to 1.</p>
<p>Now, you need to create the <code>/etc/wireguard/wg0.conf</code>. This will be both the name of the connection interface and the configuration file for that interface. I&rsquo;m using just one for a simple setup.</p>
<p>[Interface]
Address = 10.200.200.1/24
ListenPort = 51820
PrivateKey = <copy private key from server-private.key>
PostUp   = iptables -A FORWARD -i %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE</p>
<p>[Peer]</p>
<h1 id="laptop">laptop<a hidden class="anchor" aria-hidden="true" href="#laptop">#</a></h1>
<p>PublicKey = <copy public key from laptop-public.key>
AllowedIPs = 10.200.200.2/32</p>
<p>Now you are ready to start the Wireguard daemon, so it can accept connections. Just run:</p>
<p>wg-quick up wg0</p>
<h3 id="some-things-to-know">Some things to know<a hidden class="anchor" aria-hidden="true" href="#some-things-to-know">#</a></h3>
<h4 id="interface">[Interface]<a hidden class="anchor" aria-hidden="true" href="#interface">#</a></h4>
<p><strong>Address:</strong> the private IPv4 addresses (you can also use IPv6 addresses) for the Wireguard server subnet. In this example, clients connection to the server will be assigned IPs ranging from 10.200.200.1 to 10.200.200.254.</p>
<p><strong>ListenPort</strong>: the port where Wireguard will listen. Don&rsquo;t forget to open it in your firewall.</p>
<p><strong>PrivateKey</strong>: the content from server-private.key.</p>
<p><strong>PostUp and PostDown</strong>: defines steps to be run after the interface is turned on or off, respectively. In this case, iptables is used to set IP masquerade rules to allow all the clients to share the server’s IPv4 address. The rules will then be cleared once the tunnel is down. Don&rsquo;t forget to change <code>eth0</code> to your server&rsquo;s network device.</p>
<h4 id="peer">[Peer]<a hidden class="anchor" aria-hidden="true" href="#peer">#</a></h4>
<p><strong>PublicKey</strong>: the content from laptop-public.key.</p>
<p><strong>AllowedIPs</strong>: the subnet IP assigned to that client when it connects to the server</p>
<h2 id="set-up-the-client">Set up the client<a hidden class="anchor" aria-hidden="true" href="#set-up-the-client">#</a></h2>
<p>On the client side, you&rsquo;ll also have to install Wireguard. If you&rsquo;re using Debian, Ubuntu or any distribution based on the previous two, the command will be the same (I&rsquo;m assuming Ubuntu uses the same package names. If not, change it to your needs). In Arch, the distribution I&rsquo;m currently using, you can install packages with:</p>
<p>pacman -Syuv wireguard-dkms wireguard-tools</p>
<h3 id="configure-the-wireguard-client">Configure the Wireguard client<a hidden class="anchor" aria-hidden="true" href="#configure-the-wireguard-client">#</a></h3>
<p>Create the <code>/etc/wireguard/wg0.conf</code> file and populate it with the following content:</p>
<p>[Interface]
Address = 10.200.200.2/24
PrivateKey = <copy private key from laptop-private.key></p>
<p>[Peer]
PublicKey = <copy public key from server-public.key>
AllowedIPs = 0.0.0.0/0
Endpoint = xxx.xxx.xxx.xxx:51820
PersistentKeepalive = 25</p>
<h3 id="some-things-to-know-1">Some things to know<a hidden class="anchor" aria-hidden="true" href="#some-things-to-know-1">#</a></h3>
<h4 id="interface-1">[Interface]<a hidden class="anchor" aria-hidden="true" href="#interface-1">#</a></h4>
<p><strong>Addresss</strong>: the client&rsquo;s IP address in Wiregard&rsquo;s subnet.</p>
<p><strong>PrivateKey</strong>: the content from laptop-private.key.</p>
<h4 id="peer-1">[Peer]<a hidden class="anchor" aria-hidden="true" href="#peer-1">#</a></h4>
<p><strong>PublicKey</strong>: the content from server-public.key.</p>
<p><strong>AllowedIPs</strong>: set it to 0.0.0.0/0 to forward all IPv4 traffic through Wireguard.</p>
<p><strong>Endpoint</strong>: the server IP address, followed by the port to connect to.</p>
<p><strong>PersistentKeepalive</strong>: the number of seconds you wish the client sends a keepalive packet to the server. This is useful if the client is behind NAT or a firewall</p>
<h2 id="test-the-connection">Test the connection<a hidden class="anchor" aria-hidden="true" href="#test-the-connection">#</a></h2>
<p>On the client side, run <code>wg-quick up wg0</code>. You should now have a working Wireguard connection just like any VPN.</p>
<p>If you found a typo or an error, please use the comment box to report it. Also, if you found the post useful, please share it on social media, so it can reach a larger audience.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/arch/">arch</a></li>
      <li><a href="/tags/debian/">debian</a></li>
      <li><a href="/tags/howto/">howto</a></li>
      <li><a href="/tags/tips/">tips</a></li>
      <li><a href="/tags/vpn/">vpn</a></li>
      <li><a href="/tags/wireguard/">wireguard</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="/post/covid19-e-a-desinformacao-manual-de-sobrevivencia/">
    <span class="title">« Página Anterior</span>
    <br>
    <span>#COVID19 e a desinformação - …</span>
  </a>
  <a class="next" href="/post/lxqt/">
    <span class="title">Próxima Página »</span>
    <br>
    <span>LXQT</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span><a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA-4.0</a> - 2022</span><br/>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a>, a customized
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod theme</a>, and an improved
        <a href="https://github.com/catppuccin/catppuccin" rel="noopener" target="_blank">Catppuccin color palette</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
